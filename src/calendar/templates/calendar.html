<div class="fugu-calendar">
    <div class="fugu-cal-panel-day" ng-show="panels.day">
        <div class="fugu-cal-month">
            <i class="fugu-cal-pre-button glyphicon glyphicon-chevron-left" ng-click="prevMonth()"></i>
            <span class="fugu-cal-month-name">
                <a href="javascript:;" ng-click="selectPanel('month')">{{FORMATS.SHORTMONTH[currentMonth]}}</a>
                <a href="javascript:;" ng-click="selectYearPanelHandler()">{{currentYear}}</a>
            </span>
            <i class="fugu-cal-next-button glyphicon glyphicon-chevron-right" ng-click="nextMonth()"></i>
        </div>
        <div class="fugu-cal-header clearfix">
            <div ng-repeat="day in dayNames track by $index">{{day}}</div>
        </div>
        <div class="fugu-cal-body">
            <div class="fugu-cal-row" ng-repeat="row in allDays">
                <div ng-class="{'fugu-cal-select':day.index===currentDay,'fugu-cal-outside':!day.inMonth,'fugu-cal-weekday':day.isWeekend,'fugu-cal-day-today':day.isToday,'fugu-cal-day-disabled':day.isDisabled}"
                     class="fugu-cal-day" ng-repeat="day in row" ng-click="selectDayHandler(day)">
                    <span class="fugu-cal-day-inner">{{day.day}}</span>
                </div>
            </div>
        </div>
        <div class="fugu-cal-footer">
            <div class="fugu-cal-time" ng-click="selectTimePanelHandler()" ng-if="showTime">
                <span class="glyphicon glyphicon-time"></span>
                {{selectDate | date:'shortTime'}}
            </div>
            <div class="fugu-cal-today-btn" ng-click="chooseToday()">Today</div>
        </div>
    </div>
    <div class="fugu-cal-panel-time" ng-show="panels.time"> <!--这里要用ng-show,不能用ng-if-->
        <fugu-timepanel ng-model="selectDate"></fugu-timepanel>
        <div class="btn-group clearfix">
            <button class="btn btn-sm btn-default fugu-cal-time-cancal" ng-click="timePanelBack()">返回</button>
            <button class="btn btn-sm btn-default fugu-cal-time-now" ng-click="timePanelSelectNow()">此刻</button>
            <button class="btn btn-sm btn-default fugu-cal-time-ok" ng-click="timePanelOk()">确定 </button>
        </div>
    </div>
    <div class="fugu-cal-panel-month" ng-show="panels.month">
        <div class="fugu-cal-month">
            <span class="fugu-cal-month-name">
                <a href="javascript:;" ng-click="selectYearPanelHandler()">{{currentYear}}</a>
            </span>
        </div>
        <div class="fugu-cal-body">
            <table class="fugu-cal-month-table">
                <tr ng-repeat="monthRow in allMonths">
                    <td class="fugu-cal-month-item"
                        ng-repeat="month in monthRow"
                        ng-click="chooseMonthHandler(month.index)"
                        ng-class="{'fugu-cal-month-select':month.index === currentMonth}">
                        <span class="fugu-cal-month-inner">{{month.name}}</span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="fugu-cal-panel-year" ng-show="panels.year">
        <div class="fugu-cal-month">
            <i class="fugu-cal-pre-button glyphicon glyphicon-chevron-left" ng-click="prev12Years()"></i>
            <span class="fugu-cal-month-name">
                <a href="javascript:;">{{allYears[0][0]}}-{{allYears[3][2]}}</a>
            </span>
            <i class="fugu-cal-next-button glyphicon glyphicon-chevron-right" ng-click="next12Years()"></i>
        </div>
        <div class="fugu-cal-body">
            <table class="fugu-cal-month-table">
                <tr ng-repeat="yearRow in allYears track by $index">
                    <td class="fugu-cal-month-item fugu-cal-year-item"
                        ng-repeat="year in yearRow track by $index"
                        ng-click="chooseYearHandler(year)"
                        ng-class="{'fugu-cal-month-select':year === currentYear}">
                        <span class="fugu-cal-month-inner">{{year}}</span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>